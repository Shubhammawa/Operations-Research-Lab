clc;
clear all;

%--------------Decison variables--------------------%
% xij = Quantity shipped from plant i to demand point j
% i = 1,2,3;    j = 1,2,3,4;    xij >= 0
% y1, y2, y3, y4 = 1 if x12,x22,x23,x33 selected respectively
%          0 if not 

%----------------Objective function---------------%
% Minimize cost Z = 300x11 + 200x12 + 700x13 + .... + 500x34

%-----------------Constraints--------------------%
% x11 + x12 + x13 + x14 <= 5000
% x21 + x22 + x23 + x24 <= 6000
% x31 + x32 + x33 + x34 <= 2500

% x11 + x21 + x31 >= 6000
% x12 + x22 + x32 >= 4000
% x13 + x23 + x33 >= 2000
% x14 + x24 + x34 >= 1500

% y1 + y2 <= 1
% y3 + y4 <= 1
% x12 <= 100000y1
% x22 <= 100000y2
% x23 <= 100000y3
% x33 <= 100000y4
c = [300;200;700;600;700;500;200;300;200;500;400;500;0;0;0;0];

intcon = 1:16;

A = [1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0;
    -1,0,0,0,-1,0,0,0,-1,0,0,0,0,0,0,0;
    0,-1,0,0,0,-1,0,0,0,-1,0,0,0,0,0,0;
    0,0,-1,0,0,0,-1,0,0,0,-1,0,0,0,0,0;
    0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0;
    0,1,0,0,0,0,0,0,0,0,0,0,-1000000,0,0,0;
    0,0,0,0,0,1,0,0,0,0,0,0,0,-100000,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1;
    0,0,0,0,0,0,1,0,0,0,0,0,0,0,-100000,0;
    0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,-100000];

b = [5000;6000;2500;-6000;-4000;-2000;-1500;1;0;0;1;0;0];



lb = [0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0];

ub = [999999;99999999;99999999;99999999;99999999;99999999;99999999;99999999;9999999;999999;999999;999999;1;1;1;1];

[x, fval] = intlinprog(c,intcon,A,b,[],[],lb);
fprintf('The minimum cost is %d\n',fval);

for i = 0:2
    for j = 1:4
        fprintf('x%d%d = %d\n',i+1,j,x(4*i + j));
    end
end    