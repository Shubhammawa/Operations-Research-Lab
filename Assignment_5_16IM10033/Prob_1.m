clc;
clear all;

%----------------Decision variables-----------------%

% yij = Number of tons transported from supplier i to generating station j
% i = 1,2,..,7       j = 1,2,3,4,5
% yij >= 0

%----------------Objective function------------------%

% Minimize total cost Z = 32(y41 + y42 + y43 + y44 + y45)+
%                         35(y51 + y52 + y53 + y54 + y55)+
%                         31(y61 + y62 + y63 + y64 + y65)+
%                         33(y71 + y72 + y73 + y74 + y75)+
%                         22*350000 + 26*300000 + 22*275000

%                         5y11 + 5y12 + 4.75y13 + 5y14 + 4.75y15
%                         3.75y21 + 3.75y22 + 3.5y23 + 3.75y24 + 3.5y25 +
%                         3y31 + 3y32 + 2.75y33 + 3y34  +2.75y35 +
%                         3.25y41 + 3.25y42 + 2.85y43 + 3.25y44 + 2.85y45 +
%                         5y51 + 5y52 + 4.75y53 + 5y54 + 4.75y55 + 
%                         2.25y61 + 2.25y62 + 2y63 + 2.25y64 + 2y65 + 
%                         2y71 + 2y72 + 1.6y73 + 2y74 + 1.6y75

%----------------Constraints--------------------%


% Supply constraints

% y11 + y12 + y13 + y14 + y15 = 350000
% y21 + y22 + y23 + y24 + y25 = 300000
% y31 + y32 + y33 + y34 + y35 = 275000
% y41 + y42 + y43 + y44 + y45 <= 200000
% y51 + y52 + y53 + y54 + y55 <= 175000
% y61 + y62 + y63 + y64 + y65 <= 200000
% y71 + y72 + y73 + y74 + y75 <= 180000

% Demand constraints

% 13000y11 + 13300y21 + 12600y31 + 12250y41 + 12000y51 + 12000y61 + 11300y71 >= 550000*10500
% 13000y12 + 13300y22 + 12600y32 + 12250y42 + 12000y52 + 12000y62 + 11300y72 >= 500000*10200
% 13000y13 + 13300y23 + 12600y33 + 12250y43 + 12000y53 + 12000y63 + 11300y73 >= 650000*10100
% 13000y14 + 13300y24 + 12600y34 + 12250y44 + 12000y54 + 12000y64 + 11300y74 >= 750000*10000
% 13000y15 + 13300y25 + 12600y35 + 12250y45 + 12000y55 + 12000y65 + 11300y75 >= 1100000*10000


c = [5; 5; 4.75; 5; 4.75; 3.75; 3.75; 3.5; 3.75; 3.5; 3; 3; 2.75; 3; 2.75;
    32+3.25; 32+3.25; 32+2.85; 32+3.25; 32+2.85;
    35+5; 35+5; 35+4.75; 35+5; 35+4.75;
    31+2.25; 31+2.25; 31+2; 31+2.25; 31+2;
    35;35;34.6;35;34.6];


A = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1;
    -13000,0,0,0,0,-13300,0,0,0,0,-12600,0,0,0,0,-12250,0,0,0,0,-12000,0,0,0,0,-12000,0,0,0,0,-11300,0,0,0,0;
    0,-13000,0,0,0,0,-13300,0,0,0,0,-12600,0,0,0,0,-12250,0,0,0,0,-12000,0,0,0,0,-12000,0,0,0,0,-11300,0,0,0;
    0,0,-13000,0,0,0,0,-13300,0,0,0,0,-12600,0,0,0,0,-12250,0,0,0,0,-12000,0,0,0,0,-12000,0,0,0,0,-11300,0,0;
    0,0,0,-13000,0,0,0,0,-13300,0,0,0,0,-12600,0,0,0,0,-12250,0,0,0,0,-12000,0,0,0,0,-12000,0,0,0,0,-11300,0;
    0,0,0,0,-13000,0,0,0,0,-13300,0,0,0,0,-12600,0,0,0,0,-12250,0,0,0,0,-12000,0,0,0,0,-12000,0,0,0,0,-11300];

b = [200000;175000;200000;180000;-550000*10500;-500000*10200;-650000*10100;-750000*10000;-1100000*10000];

A_eq = [1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
    0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];

b_eq = [350000;300000;275000];

lb = [0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0];

[x, fval] = linprog(c,A,b,A_eq,b_eq,lb);
fprintf('Minimum cost possible is %d\n',fval + 22*350000 + 26*300000 + 22*275000);

fprintf('The allocations at all plants is as follows: \n')
for i = 1:7
    for j = 1:5
        fprintf('x%d%d = %f\n',i,j,x((i-1)*5 + j));
    end
end    

%c_1 = [22;26;22;32;35;31;33];               % Purchase cost coefficient matrix

%for i = 1:5
 %   pc = pc + c_1[i]*sum(x(i:i+5));
%end
%fprintf('Purchase cost = %f',pc);
